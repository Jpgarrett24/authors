{"ast":null,"code":"var _jsxFileName = \"/Users/josephgarrett/Desktop/coding_dojo/MERN/full_stack/authors/authors-SPA/src/components/Form.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { navigate, Link } from \"@reach/router\";\nimport axios from \"axios\";\n\nconst Form = props => {\n  const {\n    action,\n    authorID\n  } = props;\n  const [input, setInput] = useState(\"\");\n  const [errors, setErrors] = useState(null);\n  const [author, setAuthor] = useState(null);\n\n  const displayErrors = () => {\n    var _errors$name, _errors$name$properti;\n\n    return errors && /*#__PURE__*/React.createElement(\"small\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 17\n      }\n    }, errors === null || errors === void 0 ? void 0 : (_errors$name = errors.name) === null || _errors$name === void 0 ? void 0 : (_errors$name$properti = _errors$name.properties) === null || _errors$name$properti === void 0 ? void 0 : _errors$name$properti.message);\n  };\n\n  useEffect(() => {\n    axios.get(`http://localhost:8000/api/authors/${authorID}`).then(res => {\n      if (res.data.name !== undefined) {\n        setAuthor(res.data);\n        setInput(res.data.name);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [authorID]);\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    const newAuthor = {\n      name: input\n    };\n\n    if (action === \"create\") {\n      axios.post('http://localhost:8000/api/authors', newAuthor).then(res => {\n        navigate('/');\n      }).catch(err => {\n        setErrors(err.response.data.errors);\n      });\n      setInput(\"\");\n    }\n\n    if (action === \"update\") {\n      axios.put(`http://localhost:8000/api/authors/${authorID}`, newAuthor).then(res => {\n        navigate('/');\n      }).catch(err => {\n        setErrors(err.response.data.errors);\n      });\n      setInput('');\n    }\n\n    ;\n  };\n\n  if (!author) {\n    return /*#__PURE__*/React.createElement(\"h5\", {\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }\n    }, \"Your selected author either doesn't exist, or hasn't written anything good yet.\");\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, \"Name:\"), \" \", displayErrors(), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    id: \"name\",\n    value: input,\n    onChange: event => setInput(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: event => navigate('/'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, \"Submit\")));\n};\n\nexport default Form;","map":{"version":3,"sources":["/Users/josephgarrett/Desktop/coding_dojo/MERN/full_stack/authors/authors-SPA/src/components/Form.js"],"names":["React","useState","useEffect","navigate","Link","axios","Form","props","action","authorID","input","setInput","errors","setErrors","author","setAuthor","displayErrors","color","name","properties","message","get","then","res","data","undefined","catch","err","console","log","handleSubmit","event","preventDefault","newAuthor","post","response","put","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { navigate, Link } from \"@reach/router\";\nimport axios from \"axios\";\n\nconst Form = (props) => {\n    const { action, authorID } = props;\n    const [input, setInput] = useState(\"\");\n    const [errors, setErrors] = useState(null);\n    const [author, setAuthor] = useState(null);\n\n    const displayErrors = () => {\n        return (\n            errors && (\n                <small style={{ color: 'red' }}>{errors?.name?.properties?.message}</small>\n            ))\n    }\n\n    useEffect(() => {\n        axios.get(`http://localhost:8000/api/authors/${authorID}`)\n            .then((res) => {\n                if (res.data.name !== undefined) {\n                    setAuthor(res.data);\n                    setInput(res.data.name);\n                }\n            })\n            .catch((err) => {\n                console.log(err);\n            })\n    }, [authorID])\n\n    const handleSubmit = (event) => {\n        event.preventDefault();\n\n        const newAuthor = {\n            name: input,\n        };\n\n        if (action === \"create\") {\n            axios.post('http://localhost:8000/api/authors', newAuthor)\n                .then((res) => {\n                    navigate('/');\n                })\n                .catch((err) => { setErrors(err.response.data.errors) });\n\n            setInput(\"\");\n        }\n\n        if (action === \"update\") {\n            axios.put(`http://localhost:8000/api/authors/${authorID}`, newAuthor)\n                .then((res) => { navigate('/') })\n                .catch((err) => { setErrors(err.response.data.errors) });\n\n            setInput('')\n        };\n    }\n\n    if (!author) {\n        return (\n            <h5 style={{ color: \"red\" }}>Your selected author either doesn't exist, or hasn't written anything good yet.</h5>\n        )\n    }\n\n    return (\n        <>\n            <form onSubmit={handleSubmit}>\n                <label htmlFor=\"name\">Name:</label> {displayErrors()}\n                <input type=\"text\" name=\"name\" id=\"name\" value={input} onChange={(event) => setInput(event.target.value)} />\n                <button type=\"button\" onClick={(event) => navigate('/')}>Cancel</button>\n                <button>Submit</button>\n            </form>\n        </>\n    )\n};\n\nexport default Form;"]},"metadata":{},"sourceType":"module"}