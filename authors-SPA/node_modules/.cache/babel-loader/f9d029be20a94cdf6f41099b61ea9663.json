{"ast":null,"code":"var _jsxFileName = \"/Users/josephgarrett/Desktop/coding_dojo/MERN/full_stack/authors/authors-SPA/src/components/Form.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { navigate } from \"@reach/router\";\nimport axios from \"axios\";\n\nconst Form = props => {\n  const {\n    action,\n    authorID\n  } = props;\n  const [input, setInput] = useState(\"\");\n  const [errors, setErrors] = useState(null);\n\n  const displayErrors = () => {\n    var _errors$name, _errors$name$properti;\n\n    errors && /*#__PURE__*/React.createElement(\"small\", {\n      style: {\n        style: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 12,\n        columnNumber: 13\n      }\n    }, errors === null || errors === void 0 ? void 0 : (_errors$name = errors.name) === null || _errors$name === void 0 ? void 0 : (_errors$name$properti = _errors$name.properties) === null || _errors$name$properti === void 0 ? void 0 : _errors$name$properti.message);\n  };\n\n  useEffect(() => {\n    axios.get(`http://localhost:8000/api/authors/${authorID}`).then(res => {\n      if (res.data.name !== undefined) {\n        setInput(res.data.name);\n      }\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [authorID]);\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    const newAuthor = {\n      name: input\n    };\n\n    if (action === \"create\") {\n      axios.post('http://localhost:8000/api/authors', newAuthor).then(res => {\n        navigate('/');\n      }).catch(err => {\n        setErrors(err.response.data.errors);\n      });\n      setInput(\"\");\n    }\n\n    if (action === \"update\") {\n      axios.put(`http://localhost:8000/api/authors/${authorID}`, newAuthor).then(res => {\n        navigate('/');\n      }).catch(err => {\n        console.log(err);\n      });\n      setInput('');\n    }\n\n    ;\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, \"Name:\"), \" \", displayErrors, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    id: \"name\",\n    value: input,\n    onChange: event => setInput(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: event => navigate('/'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }\n  }, \"Submit\")));\n};\n\nexport default Form;","map":{"version":3,"sources":["/Users/josephgarrett/Desktop/coding_dojo/MERN/full_stack/authors/authors-SPA/src/components/Form.js"],"names":["React","useState","useEffect","navigate","axios","Form","props","action","authorID","input","setInput","errors","setErrors","displayErrors","style","name","properties","message","get","then","res","data","undefined","catch","err","console","log","handleSubmit","event","preventDefault","newAuthor","post","response","put","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { navigate } from \"@reach/router\";\nimport axios from \"axios\";\n\nconst Form = (props) => {\n    const { action, authorID } = props;\n    const [input, setInput] = useState(\"\");\n    const [errors, setErrors] = useState(null);\n\n    const displayErrors = () => {\n        errors && (\n            <small style={{ style: \"red\" }}>{errors?.name?.properties?.message}</small>\n        )\n    }\n\n    useEffect(() => {\n        axios.get(`http://localhost:8000/api/authors/${authorID}`)\n            .then((res) => {\n                if (res.data.name !== undefined) {\n                    setInput(res.data.name)\n                }\n            })\n            .catch((err) => {\n                console.log(err);\n            })\n    }, [authorID])\n\n    const handleSubmit = (event) => {\n        event.preventDefault();\n\n        const newAuthor = {\n            name: input,\n        };\n\n        if (action === \"create\") {\n            axios.post('http://localhost:8000/api/authors', newAuthor)\n                .then((res) => {\n                    navigate('/');\n                })\n                .catch((err) => { setErrors(err.response.data.errors) });\n\n            setInput(\"\");\n        }\n\n        if (action === \"update\") {\n            axios.put(`http://localhost:8000/api/authors/${authorID}`, newAuthor)\n                .then((res) => { navigate('/') })\n                .catch((err) => { console.log(err); });\n\n            setInput('')\n        };\n    }\n\n    return (\n        <>\n            <form onSubmit={handleSubmit}>\n                <label htmlFor=\"name\">Name:</label> {displayErrors}\n                <input type=\"text\" name=\"name\" id=\"name\" value={input} onChange={(event) => setInput(event.target.value)} />\n                <button type=\"button\" onClick={(event) => navigate('/')}>Cancel</button>\n                <button>Submit</button>\n            </form>\n        </>\n    )\n};\n\nexport default Form;"]},"metadata":{},"sourceType":"module"}